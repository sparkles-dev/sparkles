diff --git a/node_modules/@nrwl/schematics/src/command-line/affected.js b/node_modules/@nrwl/schematics/src/command-line/affected.js
index 061905d..6c35cb2 100644
--- a/node_modules/@nrwl/schematics/src/command-line/affected.js
+++ b/node_modules/@nrwl/schematics/src/command-line/affected.js
@@ -106,7 +106,7 @@ function affected(parsedArgs) {
 exports.affected = affected;
 function getProjects(target, parsedArgs, workspaceResults, all) {
     var projects = all
-        ? shared_1.getAllProjectNamesWithTarget(target)
+        ? shared_1.getAllProjectsWithTarget(target)
         : shared_1.getAffectedProjectsWithTarget(target)(shared_1.parseFiles(parsedArgs).files);
     return projects
         .filter(function (project) { return !parsedArgs.exclude.includes(project); })
diff --git a/node_modules/@nrwl/schematics/src/command-line/deps-calculator.js b/node_modules/@nrwl/schematics/src/command-line/deps-calculator.js
index 07ae8aa..404e3e9 100644
--- a/node_modules/@nrwl/schematics/src/command-line/deps-calculator.js
+++ b/node_modules/@nrwl/schematics/src/command-line/deps-calculator.js
@@ -198,7 +198,8 @@ var DepsCalculator = /** @class */ (function () {
     };
     DepsCalculator.prototype.processNode = function (filePath, node) {
         var _this = this;
-        if (ts.isImportDeclaration(node) || ts.isExportDeclaration(node)) {
+        if (ts.isImportDeclaration(node) ||
+            (ts.isExportDeclaration(node) && node.moduleSpecifier)) {
             var imp = this.getStringLiteralValue(node.moduleSpecifier);
             this.addDepIfNeeded(imp, filePath, DependencyType.es6Import);
             return; // stop traversing downwards
diff --git a/node_modules/@nrwl/schematics/src/command-line/deps-calculator.spec.js b/node_modules/@nrwl/schematics/src/command-line/deps-calculator.spec.js
index e1f4acf..ffed3cd 100644
--- a/node_modules/@nrwl/schematics/src/command-line/deps-calculator.spec.js
+++ b/node_modules/@nrwl/schematics/src/command-line/deps-calculator.spec.js
@@ -612,6 +612,63 @@ describe('Calculates Dependencies Between Apps and Libs', function () {
                 lib2Name: []
             });
         });
+        it("should handle an ExportDeclaration w/ moduleSpecifier and w/o moduleSpecifier", function () {
+            var deps = deps_calculator_1.dependencies('nrwl', [
+                {
+                    name: 'lib1Name',
+                    root: 'libs/lib1',
+                    files: ['lib1.ts'],
+                    fileMTimes: {
+                        'lib1.ts': 1
+                    },
+                    tags: [],
+                    implicitDependencies: [],
+                    architect: {},
+                    type: affected_apps_1.ProjectType.lib
+                },
+                {
+                    name: 'lib2Name',
+                    root: 'libs/lib2',
+                    files: ['lib2.ts'],
+                    fileMTimes: {
+                        'lib2.ts': 1
+                    },
+                    tags: [],
+                    implicitDependencies: [],
+                    architect: {},
+                    type: affected_apps_1.ProjectType.lib
+                },
+                {
+                    name: 'lib3Name',
+                    root: 'libs/lib3',
+                    files: ['lib3.ts'],
+                    fileMTimes: {
+                        'lib3.ts': 1
+                    },
+                    tags: [],
+                    implicitDependencies: [],
+                    architect: {},
+                    type: affected_apps_1.ProjectType.lib
+                }
+            ], null, function (file) {
+                switch (file) {
+                    case 'lib1.ts':
+                        return "\n            const FOO = 23;\n            export { FOO };\n          ";
+                    case 'lib2.ts':
+                        return "\n            export const BAR = 24;\n          ";
+                    case 'lib3.ts':
+                        return "\n              import { FOO } from '@nrwl/lib1';\n              export { FOO };\n              export { BAR } from '@nrwl/lib2';\n            ";
+                }
+            });
+            expect(deps).toEqual({
+                lib1Name: [],
+                lib2Name: [],
+                lib3Name: [
+                    { projectName: 'lib1Name', type: deps_calculator_1.DependencyType.es6Import },
+                    { projectName: 'lib2Name', type: deps_calculator_1.DependencyType.es6Import }
+                ]
+            });
+        });
         it('should calculate dependencies in .tsx files', function () {
             var deps = deps_calculator_1.dependencies('nrwl', [
                 {
diff --git a/node_modules/@nrwl/schematics/src/command-line/shared.d.ts b/node_modules/@nrwl/schematics/src/command-line/shared.d.ts
index 26691ae..b46b0db 100644
--- a/node_modules/@nrwl/schematics/src/command-line/shared.d.ts
+++ b/node_modules/@nrwl/schematics/src/command-line/shared.d.ts
@@ -37,6 +37,7 @@ export declare const getAffectedLibs: (touchedFiles: string[]) => string[];
 export declare function getAllAppNames(): string[];
 export declare function getAllLibNames(): string[];
 export declare function getAllProjectNamesWithTarget(target: string): string[];
+export declare function getAllProjectsWithTarget(target: string): string[];
 export declare function getProjectNames(predicate?: (projectNode: ProjectNode) => boolean): string[];
 export declare function getProjectRoots(projectNames: string[]): string[];
 export declare function allFilesInDir(dirName: string): {
diff --git a/node_modules/@nrwl/schematics/src/command-line/shared.js b/node_modules/@nrwl/schematics/src/command-line/shared.js
index 6bb2ce3..00a2af5 100644
--- a/node_modules/@nrwl/schematics/src/command-line/shared.js
+++ b/node_modules/@nrwl/schematics/src/command-line/shared.js
@@ -255,6 +255,15 @@ function getAllProjectNamesWithTarget(target) {
     return getProjectNames(function (p) { return p.architect[target]; });
 }
 exports.getAllProjectNamesWithTarget = getAllProjectNamesWithTarget;
+function getAllProjectsWithTarget(target) {
+    var angularJson = readAngularJson();
+    var nxJson = readNxJson();
+    var projects = getProjectNodes(angularJson, nxJson);
+    var dependencies = deps_calculator_1.readDependencies(nxJson.npmScope, projects);
+    var sortedProjects = topologicallySortProjects(projects, dependencies);
+    return sortedProjects.filter(function (p) { return p.architect[target]; }).map(function (p) { return p.name; });
+}
+exports.getAllProjectsWithTarget = getAllProjectsWithTarget;
 function getProjectNames(predicate) {
     var projects = getProjectNodes(readAngularJson(), readNxJson());
     if (predicate) {
diff --git a/node_modules/@nrwl/schematics/src/command-line/shared.metadata.json b/node_modules/@nrwl/schematics/src/command-line/shared.metadata.json
index 4f086d7..fc0926c 100644
--- a/node_modules/@nrwl/schematics/src/command-line/shared.metadata.json
+++ b/node_modules/@nrwl/schematics/src/command-line/shared.metadata.json
@@ -1 +1 @@
-[{"__symbolic":"module","version":4,"metadata":{"ImplicitDependencyEntry":{"__symbolic":"interface"},"NormalizedImplicitDependencyEntry":{"__symbolic":"interface"},"ImplicitDependencies":{"__symbolic":"interface"},"NxJson":{"__symbolic":"interface"},"NxJsonProjectConfig":{"__symbolic":"interface"},"parseFiles":{"__symbolic":"function"},"getImplicitDependencies":{"__symbolic":"function"},"assertWorkspaceValidity":{"__symbolic":"function"},"getProjectNodes":{"__symbolic":"function"},"readAngularJson":{"__symbolic":"function","parameters":[],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"../utils/fileutils","name":"readJsonFile","line":308,"character":9},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":308,"character":25},"right":"/angular.json"}]}},"readNxJson":{"__symbolic":"function"},"getAffected":{"__symbolic":"error","message":"Lambda not supported","line":319,"character":27},"getAffectedProjectsWithTarget":{"__symbolic":"function","parameters":["target"],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"./affected-apps","name":"affectedProjectNamesWithTarget","line":333,"character":21},"arguments":[{"__symbolic":"reference","name":"target"}]}]}},"getAffectedApps":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"reference","module":"./affected-apps","name":"affectedAppNames","line":335,"character":43}]},"getAffectedProjects":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"reference","module":"./affected-apps","name":"affectedProjectNames","line":336,"character":47}]},"getAffectedLibs":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"reference","module":"./affected-apps","name":"affectedLibNames","line":337,"character":43}]},"getAllAppNames":{"__symbolic":"function","parameters":[],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getProjectNames"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":340,"character":25}]}},"getAllLibNames":{"__symbolic":"function","parameters":[],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getProjectNames"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":344,"character":25}]}},"getAllProjectNamesWithTarget":{"__symbolic":"function","parameters":["target"],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getProjectNames"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":348,"character":25}]}},"getProjectNames":{"__symbolic":"function"},"getProjectRoots":{"__symbolic":"function"},"allFilesInDir":{"__symbolic":"function"},"lastModifiedAmongProjectFiles":{"__symbolic":"function","parameters":["projects"],"value":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"Math"},"member":"max"},"arguments":[{"__symbolic":"spread","expression":[{"__symbolic":"spread","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"projects"},"member":"map"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":402,"character":22}]}},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":403,"character":15},"right":"/angular.json"}]},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":404,"character":15},"right":"/nx.json"}]},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":405,"character":15},"right":"/tslint.json"}]},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":406,"character":15},"right":"/package.json"}]}]}]}},"getProjectMTime":{"__symbolic":"function","parameters":["project"],"value":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"Math"},"member":"max"},"arguments":[{"__symbolic":"spread","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"Object"},"member":"values"},"arguments":[{"__symbolic":"select","expression":{"__symbolic":"reference","name":"project"},"member":"fileMTimes"}]}}]}},"mtime":{"__symbolic":"function"},"normalizedProjectRoot":{"__symbolic":"function","parameters":["p"],"value":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"p"},"member":"root"},"member":"split"},"arguments":["/"]},"member":"filter"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":433,"character":12}]},"member":"slice"},"arguments":[1]},"member":"join"},"arguments":["/"]}}}}]
\ No newline at end of file
+[{"__symbolic":"module","version":4,"metadata":{"ImplicitDependencyEntry":{"__symbolic":"interface"},"NormalizedImplicitDependencyEntry":{"__symbolic":"interface"},"ImplicitDependencies":{"__symbolic":"interface"},"NxJson":{"__symbolic":"interface"},"NxJsonProjectConfig":{"__symbolic":"interface"},"parseFiles":{"__symbolic":"function"},"getImplicitDependencies":{"__symbolic":"function"},"assertWorkspaceValidity":{"__symbolic":"function"},"getProjectNodes":{"__symbolic":"function"},"readAngularJson":{"__symbolic":"function","parameters":[],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"../utils/fileutils","name":"readJsonFile","line":308,"character":9},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":308,"character":25},"right":"/angular.json"}]}},"readNxJson":{"__symbolic":"function"},"getAffected":{"__symbolic":"error","message":"Lambda not supported","line":319,"character":27},"getAffectedProjectsWithTarget":{"__symbolic":"function","parameters":["target"],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"./affected-apps","name":"affectedProjectNamesWithTarget","line":333,"character":21},"arguments":[{"__symbolic":"reference","name":"target"}]}]}},"getAffectedApps":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"reference","module":"./affected-apps","name":"affectedAppNames","line":335,"character":43}]},"getAffectedProjects":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"reference","module":"./affected-apps","name":"affectedProjectNames","line":336,"character":47}]},"getAffectedLibs":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getAffected"},"arguments":[{"__symbolic":"reference","module":"./affected-apps","name":"affectedLibNames","line":337,"character":43}]},"getAllAppNames":{"__symbolic":"function","parameters":[],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getProjectNames"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":340,"character":25}]}},"getAllLibNames":{"__symbolic":"function","parameters":[],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getProjectNames"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":344,"character":25}]}},"getAllProjectNamesWithTarget":{"__symbolic":"function","parameters":["target"],"value":{"__symbolic":"call","expression":{"__symbolic":"reference","name":"getProjectNames"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":348,"character":25}]}},"getAllProjectsWithTarget":{"__symbolic":"function"},"getProjectNames":{"__symbolic":"function"},"getProjectRoots":{"__symbolic":"function"},"allFilesInDir":{"__symbolic":"function"},"lastModifiedAmongProjectFiles":{"__symbolic":"function","parameters":["projects"],"value":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"Math"},"member":"max"},"arguments":[{"__symbolic":"spread","expression":[{"__symbolic":"spread","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"projects"},"member":"map"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":412,"character":22}]}},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":413,"character":15},"right":"/angular.json"}]},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":414,"character":15},"right":"/nx.json"}]},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":415,"character":15},"right":"/tslint.json"}]},{"__symbolic":"call","expression":{"__symbolic":"reference","name":"mtime"},"arguments":[{"__symbolic":"binop","operator":"+","left":{"__symbolic":"reference","module":"app-root-path","name":"path","line":416,"character":15},"right":"/package.json"}]}]}]}},"getProjectMTime":{"__symbolic":"function","parameters":["project"],"value":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"Math"},"member":"max"},"arguments":[{"__symbolic":"spread","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"Object"},"member":"values"},"arguments":[{"__symbolic":"select","expression":{"__symbolic":"reference","name":"project"},"member":"fileMTimes"}]}}]}},"mtime":{"__symbolic":"function"},"normalizedProjectRoot":{"__symbolic":"function","parameters":["p"],"value":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"call","expression":{"__symbolic":"select","expression":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"p"},"member":"root"},"member":"split"},"arguments":["/"]},"member":"filter"},"arguments":[{"__symbolic":"error","message":"Lambda not supported","line":443,"character":12}]},"member":"slice"},"arguments":[1]},"member":"join"},"arguments":["/"]}}}}]
\ No newline at end of file
